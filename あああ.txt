/*=== puzmon0: ソースコードひな形　===*/

#include <stdlib.h>
#include <stdio.h> /*** インクルード宣言　***/

/*** 列挙型宣言 ***/
enum Element { FIRE, WATER, WIND, EARTH, LIFE, EMPTY };//属性を定義
const char ELEMENT_SYMBOLS[] = { '$', '~', '@', '#', '&', ' ' };//属性の記号
const int ELEMENT_COLORS[] = { 31, 36, 32, 33, 35, 30 };//属性色のコード値

/*** グローバル変数宣言　***/
char* pleyerName;
int StageCount = 0;

/*** 構造体型宣言 ***/
struct Monster{//モンスター構造管理
    char* name;
    int hp;
};

struct Monster Dungeon[5]={//ダンジョン情報管理
    { "スライム", 100 },
    { "ゴブリン" ,100 },
    { "オオコウモリ" ,100 },
    { "ウェアウルフ" ,100 },
    { "ドラゴン" ,100 }
} ;

/*** プロトタイプ宣言　***/
void doBattle(void);
void goDungeon(char* pleyerName);
void printMonsterName(void);
int MonsterElement;

/*** 関数宣言　***/
void goDungeon(char* pleyerName){//ダンジョン開始から終了まで
    printf("%sはダンジョンに到着した\n",pleyerName);
    doBattle();
    printf("\x1b[39m%sはダンジョンを制覇した！\n",pleyerName);
}

int main(int argc, char** argv){//開始から最後まで
    pleyerName = argv[1];
    if ( argc == 1 ){
        printf("エラー： プレイヤー名を指定して起動してください\n");
        return 0;
    }
    printf("*** Puzzlle & Monsters ***\n");
    goDungeon(pleyerName);
    printf("***GAME CLEARED!***\n");
    printf("倒したモンスター数=%d\n",StageCount);
}
/*** ユーティリティ関数宣言　***/

void doBattle(void){    //バトル開始から終了まで
    printMonsterName();                                    
}
void printMonsterName(void){
    for(int i = 0; i < 5; i++ ){
        StageCount++;
        if (i == 0){
            MonsterElement = 1;
        }
        if (i == 1){
            MonsterElement = 3;
        }
        if (i == 2){
            MonsterElement = 2;
        }
        if (i == 3){
            MonsterElement = 2;
        }
        if (i == 4){
            MonsterElement = 0;
        }
        printf("\x1b[%dm%c%s%c\x1b[39mが現れた！\n",ELEMENT_COLORS[MonsterElement],
        ELEMENT_SYMBOLS[MonsterElement],Dungeon[i].name,ELEMENT_SYMBOLS[MonsterElement]);
        printf("\x1b[%dm%c%s%c\x1b[39mを倒した！\n",ELEMENT_COLORS[MonsterElement],
        ELEMENT_SYMBOLS[MonsterElement],Dungeon[i].name,ELEMENT_SYMBOLS[MonsterElement]);
    } 
}